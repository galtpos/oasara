# OASARA Project Structure

**Last Updated**: 2025-10-29
**Status**: Phase 1 Complete - Data Collection Infrastructure Ready

---

## ğŸ“ Directory Structure

```
oasara-marketplace/
â”‚
â”œâ”€â”€ ğŸ“š Documentation (Start Here)
â”‚   â”œâ”€â”€ README.md                          # Main project overview
â”‚   â”œâ”€â”€ QUICK-START-DATA-COLLECTION.md    # â­ Quick start guide (15 min)
â”‚   â”œâ”€â”€ GOOGLE-PLACES-API-SETUP.md        # API key setup (10 min)
â”‚   â”œâ”€â”€ DATA-COLLECTION-PLAN.md           # Complete 4-week plan
â”‚   â”œâ”€â”€ DATA-COLLECTION-STATUS.md         # Current progress report
â”‚   â”œâ”€â”€ SKILLS.md                          # Development best practices
â”‚   â”œâ”€â”€ PROJECT-STRUCTURE.md              # This file
â”‚   â””â”€â”€ CLAUDE.md                          # â¬† Parent: AI assistant context
â”‚
â”œâ”€â”€ ğŸ—‚ï¸ Data Collection Scripts
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ test-enrichment.js            # â­ Test with 5 facilities
â”‚   â”‚   â”œâ”€â”€ jci-scraper.js                # Scrape JCI directory
â”‚   â”‚   â”œâ”€â”€ enrich-facilities.js          # Google Places enrichment
â”‚   â”‚   â”œâ”€â”€ import-to-supabase.js         # Import to database
â”‚   â”‚   â””â”€â”€ README.md                      # Script documentation
â”‚   â”‚
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ jci-facilities-test-sample.json      # 5 test facilities
â”‚       â”œâ”€â”€ JCI-FACILITIES-MASTER-LIST.md        # 661 facility breakdown
â”‚       â”œâ”€â”€ jci-facilities-raw.json              # (Generated by scraper)
â”‚       â””â”€â”€ jci-facilities-enriched.json         # (Generated by enricher)
â”‚
â”œâ”€â”€ ğŸ¨ Source Code
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx                        # Main application
â”‚   â”‚   â”œâ”€â”€ index.tsx                      # Entry point
â”‚   â”‚   â”œâ”€â”€ index.css                      # Global styles
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Map/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GlobalFacilityMap.tsx # Mapbox map
â”‚   â”‚   â”‚   â”œâ”€â”€ Cards/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FacilityCard.tsx      # Facility display
â”‚   â”‚   â”‚   â”œâ”€â”€ Search/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProcedureSearch.tsx   # Search bar
â”‚   â”‚   â”‚   â”œâ”€â”€ Filters/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CountryFilter.tsx     # Country filter
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SpecialtyFilter.tsx   # Specialty filter
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ZanoFilter.tsx        # Zano payment filter
â”‚   â”‚   â”‚   â””â”€â”€ Outreach/
â”‚   â”‚   â”‚       â””â”€â”€ RequestZanoButton.tsx # Email facilities
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â””â”€â”€ supabase.ts               # Database client
â”‚   â”‚
â”‚   â””â”€â”€ public/                            # Static assets
â”‚
â”œâ”€â”€ âš™ï¸ Configuration
â”‚   â”œâ”€â”€ .env.local                         # âš ï¸ Environment variables (DO NOT COMMIT)
â”‚   â”œâ”€â”€ .env.example                       # Example env file
â”‚   â”œâ”€â”€ .gitignore                         # Git ignore rules
â”‚   â”œâ”€â”€ package.json                       # Dependencies
â”‚   â”œâ”€â”€ tsconfig.json                      # TypeScript config
â”‚   â”œâ”€â”€ tailwind.config.js                 # Tailwind config
â”‚   â”œâ”€â”€ postcss.config.js                  # PostCSS config
â”‚   â””â”€â”€ netlify.toml                       # Netlify deployment
â”‚
â””â”€â”€ ğŸ—„ï¸ Database
    â””â”€â”€ database/
        â”œâ”€â”€ SETUP-DATABASE.sql             # Initial schema
        â””â”€â”€ migrations/                    # Future migrations
```

---

## ğŸš€ Quick Navigation

### Just Getting Started?
1. **[QUICK-START-DATA-COLLECTION.md](QUICK-START-DATA-COLLECTION.md)** - Start here (15 min)
2. **[GOOGLE-PLACES-API-SETUP.md](GOOGLE-PLACES-API-SETUP.md)** - Get API key (10 min)
3. **Run test**: `GOOGLE_PLACES_API_KEY=your_key node scripts/test-enrichment.js`

### Need to Understand the Plan?
- **[DATA-COLLECTION-PLAN.md](DATA-COLLECTION-PLAN.md)** - Complete 4-week roadmap
- **[DATA-COLLECTION-STATUS.md](DATA-COLLECTION-STATUS.md)** - Current status
- **[data/JCI-FACILITIES-MASTER-LIST.md](data/JCI-FACILITIES-MASTER-LIST.md)** - 661 facility breakdown

### Working on Development?
- **[SKILLS.md](SKILLS.md)** - Best practices and troubleshooting
- **[scripts/README.md](scripts/README.md)** - Script documentation
- **[README.md](README.md)** - Full project documentation

### AI Assistant Working on This?
- **[../CLAUDE.md](../CLAUDE.md)** - Complete AI context (in parent directory)

---

## ğŸ“ File Purposes

### Documentation Files

| File | Purpose | When to Use |
|------|---------|-------------|
| README.md | Project overview, setup instructions | First time setting up project |
| QUICK-START-DATA-COLLECTION.md | Fast track to 661 facilities | Ready to collect data NOW |
| GOOGLE-PLACES-API-SETUP.md | Google API key setup | Need API key |
| DATA-COLLECTION-PLAN.md | Detailed 4-week plan | Planning execution |
| DATA-COLLECTION-STATUS.md | Current progress report | Check what's done |
| SKILLS.md | Dev best practices | Development work |
| PROJECT-STRUCTURE.md | This file | Navigate project |

### Script Files

| File | Purpose | Command |
|------|---------|---------|
| test-enrichment.js | Test with 5 facilities | `GOOGLE_PLACES_API_KEY=key node scripts/test-enrichment.js` |
| jci-scraper.js | Scrape JCI directory | `node scripts/jci-scraper.js` |
| enrich-facilities.js | Google Places enrichment | `GOOGLE_PLACES_API_KEY=key node scripts/enrich-facilities.js` |
| import-to-supabase.js | Import to database | `node scripts/import-to-supabase.js` |

### Data Files

| File | Purpose | Size |
|------|---------|------|
| jci-facilities-test-sample.json | Test sample | 5 facilities |
| JCI-FACILITIES-MASTER-LIST.md | Complete breakdown | 661 facilities |
| jci-facilities-raw.json | Scraped data | Generated by scraper |
| jci-facilities-enriched.json | Enriched data | Generated by enricher |

### Source Files

| File | Purpose | Lines |
|------|---------|-------|
| App.tsx | Main React app | ~400 |
| lib/supabase.ts | Database client | ~200 |
| GlobalFacilityMap.tsx | Mapbox map | ~300 |
| FacilityCard.tsx | Facility display | ~150 |
| ProcedureSearch.tsx | Search bar | ~100 |

### Configuration Files

| File | Purpose | Critical? |
|------|---------|-----------|
| .env.local | API keys and secrets | âš ï¸ YES - DO NOT COMMIT |
| package.json | Dependencies | âœ“ |
| tsconfig.json | TypeScript config | âœ“ |
| tailwind.config.js | Styling config | âœ“ |
| netlify.toml | Deployment config | âœ“ |

---

## ğŸ¯ Workflows

### Data Collection Workflow
```
1. Get API Key
   â””â”€â†’ GOOGLE-PLACES-API-SETUP.md

2. Test Pipeline
   â””â”€â†’ scripts/test-enrichment.js
   â””â”€â†’ Uses: data/jci-facilities-test-sample.json

3. Collect Data
   â””â”€â†’ scripts/jci-scraper.js
   â””â”€â†’ Outputs: data/jci-facilities-raw.json

4. Enrich Data
   â””â”€â†’ scripts/enrich-facilities.js
   â””â”€â†’ Outputs: data/jci-facilities-enriched.json

5. Import Data
   â””â”€â†’ scripts/import-to-supabase.js
   â””â”€â†’ Updates: Supabase database

6. Verify
   â””â”€â†’ Open: http://localhost:3000
```

### Development Workflow
```
1. Setup Environment
   â””â”€â†’ README.md (installation)
   â””â”€â†’ .env.local (configuration)

2. Start Development
   â””â”€â†’ npm start
   â””â”€â†’ http://localhost:3000

3. Make Changes
   â””â”€â†’ src/components/...
   â””â”€â†’ SKILLS.md (best practices)

4. Test Changes
   â””â”€â†’ Check browser
   â””â”€â†’ Verify Supabase data

5. Deploy
   â””â”€â†’ git push
   â””â”€â†’ Netlify auto-deploys
```

---

## ğŸ” Environment Variables (.env.local)

```bash
# Supabase
REACT_APP_SUPABASE_URL=https://whklrclzrtijneqdjmiy.supabase.co
REACT_APP_SUPABASE_ANON_KEY=eyJhbGci...

# Mapbox
REACT_APP_MAPBOX_TOKEN=pk.eyJ1Ijoi...

# EmailJS
REACT_APP_EMAILJS_SERVICE_ID=your_service_id
REACT_APP_EMAILJS_TEMPLATE_ID=your_template_id
REACT_APP_EMAILJS_PUBLIC_KEY=your_public_key

# Google Places (for data collection scripts)
GOOGLE_PLACES_API_KEY=AIzaSyA...
```

âš ï¸ **NEVER commit .env.local to Git!**

---

## ğŸ“Š Data Flow

```
JCI Directory (Web)
    â†“
[jci-scraper.js]
    â†“
jci-facilities-raw.json
    â†“
[enrich-facilities.js] â†â”€ Google Places API
    â†“
jci-facilities-enriched.json
    â†“
[import-to-supabase.js]
    â†“
Supabase Database
    â†“
[React App] â†â”€ Mapbox API
    â†“
User Browser
```

---

## ğŸ¨ Component Hierarchy

```
App.tsx
â”œâ”€â”€ GlobalFacilityMap.tsx
â”‚   â””â”€â”€ Mapbox markers
â”œâ”€â”€ ProcedureSearch.tsx
â”œâ”€â”€ Filters
â”‚   â”œâ”€â”€ CountryFilter.tsx
â”‚   â”œâ”€â”€ SpecialtyFilter.tsx
â”‚   â””â”€â”€ ZanoFilter.tsx
â””â”€â”€ FacilityCard.tsx
    â””â”€â”€ RequestZanoButton.tsx
```

---

## ğŸ’¾ Database Schema

### facilities table
```sql
- id (uuid, primary key)
- name (text)
- country (text)
- city (text)
- lat (numeric)
- lng (numeric)
- jci_accredited (boolean)
- specialties (text[])
- popular_procedures (jsonb)
- languages (text[])
- google_rating (numeric)
- review_count (integer)
- accepts_zano (boolean)
- contact_email (text)
- website (text)
- phone (text)
- airport_distance (text)
- created_at (timestamp)
- updated_at (timestamp)
```

### zano_requests table
```sql
- id (uuid, primary key)
- facility_id (uuid, foreign key)
- status (text)
- requested_at (timestamp)
```

---

## ğŸš§ Common Tasks

### Add New Facility
```sql
INSERT INTO facilities (name, country, city, lat, lng, ...)
VALUES ('Hospital Name', 'Country', 'City', 0.0, 0.0, ...);
```

### Update Facility
```sql
UPDATE facilities
SET accepts_zano = true
WHERE id = 'uuid';
```

### Check Database
```sql
SELECT COUNT(*) FROM facilities;
SELECT country, COUNT(*) FROM facilities GROUP BY country;
```

### Test API Connection
```bash
curl "https://maps.googleapis.com/maps/api/place/textsearch/json?query=hospital&key=YOUR_KEY"
```

---

## ğŸ“ˆ Progress Tracking

### Current State
- âœ… 10 facilities live
- âœ… Infrastructure complete
- â³ API key needed
- â³ 651 facilities pending

### Milestones
- **Week 1**: 140 facilities (Tier 1)
- **Week 2**: 260 facilities (Tier 2)
- **Week 3**: 340 facilities (Tier 3)
- **Week 4**: 661 facilities (Complete)

---

## ğŸ†˜ Need Help?

1. **Getting started**: [QUICK-START-DATA-COLLECTION.md](QUICK-START-DATA-COLLECTION.md)
2. **Development issues**: [SKILLS.md](SKILLS.md)
3. **Script problems**: [scripts/README.md](scripts/README.md)
4. **Planning questions**: [DATA-COLLECTION-PLAN.md](DATA-COLLECTION-PLAN.md)

---

## ğŸ¯ Next Action

```bash
# If you have Google Places API key:
GOOGLE_PLACES_API_KEY=your_key node scripts/test-enrichment.js

# If you need API key:
# See: GOOGLE-PLACES-API-SETUP.md (10 minutes)
```

**Once test passes, you're ready to scale to 661 facilities!** ğŸš€

---

**Updated**: 2025-10-29
**Status**: Infrastructure Complete âœ…
